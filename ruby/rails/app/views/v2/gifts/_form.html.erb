<%- div_id = "gift-#{gift.new_record? ? 'new' : gift.id}" -%>

<div id='<%= div_id %>' class='c-item o-flex-item'>
<%= form_with(:model => [page_user, gift], :local => false, :data => {'replace-target' => div_id}) do |form| %>
  <h2 class='c-item__description'><%= form.text_field :description, :placeholder => 'Enter a description', :size => 40 %></h2>

  <div>
    <%= form.label :tags %>:
    <span>
      <%= text_field_tag 'gift[tag_names]', gift.tag_names.join(' '), :placeholder => 'Enter a space separated list of tags', :size => 40 %>
    </span>
  </div>

  <div>
    <%= form.label :url, 'Links' %>:
    <span><%= form.text_field :url, :placeholder => 'Enter a space separated list of URLs', :size => 40 %></span>
  </div>

  <div>
    <%= form.label :price %>:
    <span><%= form.text_field :price %></span>
  </div>

  <div>
    <%= form.label :multi %>:
    <span><%= form.check_box :multi %></span>
  </div>

<% if current_user != gift.user %>
  <div>
    <%= form.label :hidden %>:
    <span><%= form.check_box :hidden %></span>
  </div>
<% end %>

  <ul class='c-item__actions o-flex-item--centered o-flex-inline'>
    Actions:
    <li><%= form.submit (gift.new_record? ? 'create' : 'update'), :onClick => 'window.events.showMenu()', :class => 'o-button' %></li>
    <li>
    <%-
      if gift.new_record?
        cancel_func = 'window.gifts.onCancelCreateClicked()'
      else
        cancel_func = "window.gifts.onCancelEditClicked('#{div_id}', '#{user_gift_path(page_user, gift)}')"
      end
    -%>
      <button type='button' class='o-button u-destructive', onClick="<%= cancel_func %>">cancel</button>
    </li>
  </ul>
<% end %>
